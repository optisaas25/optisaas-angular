<h2 mat-dialog-title>Famille existante trouvée</h2>
<div mat-dialog-content class="dialog-content">
    <p class="mb-4">Le nom de famille <strong>{{ data.currentNom }}</strong> existe déjà pour les clients suivants.
        Voulez-vous rejoindre un groupe existant ou en créer un nouveau ?</p>

    <table mat-table [dataSource]="data.existingClients" class="mat-elevation-z1 w-full">
        <ng-container matColumnDef="prenom">
            <th mat-header-cell *matHeaderCellDef> Prénom </th>
            <td mat-cell *matCellDef="let client"> {{ client.prenom }} </td>
        </ng-container>

        <ng-container matColumnDef="cin">
            <th mat-header-cell *matHeaderCellDef> CIN </th>
            <td mat-cell *matCellDef="let client"> {{ client.numeroPieceIdentite || '-' }} </td>
        </ng-container>

        <ng-container matColumnDef="telephone">
            <th mat-header-cell *matHeaderCellDef> Téléphone </th>
            <td mat-cell *matCellDef="let client"> {{ client.telephone || '-' }} </td>
        </ng-container>

        <ng-container matColumnDef="ville">
            <th mat-header-cell *matHeaderCellDef> Ville </th>
            <td mat-cell *matCellDef="let client"> {{ client.ville }} </td>
        </ng-container>

        <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef> Action </th>
            <td mat-cell *matCellDef="let client">
                <button mat-stroked-button color="primary" (click)="joinGroup(client)">
                    Rejoindre ce groupe
                </button>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <div class="mt-4 p-4 bg-gray-50 rounded text-sm text-gray-600">
        <mat-icon class="align-middle text-base mr-1">info</mat-icon>
        Si le client est différent, créez un nouveau groupe "Principal". Il sera distingué par son prénom et CIN.
    </div>
</div>
<div mat-dialog-actions align="end" class="gap-2">
    <button mat-raised-button color="accent" (click)="createNew()">
        Créer un Nouveau Groupe (Principal)
    </button>
</div>